<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ²ˆæ˜Ÿå›ï¼æ˜Ÿå…‰å‚™å¿˜éŒ„</title>
    <style>
        /* å…¨åŸŸè¨­å®š */
        * { box-sizing: border-box; }

        :root {
            --star-purple: #e0d7ff;
            --deep-purple: #9a8cff;
            --text-color: #4a4a4a;
            --soft-white: rgba(255, 255, 255, 0.98); 
        }

        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background: linear-gradient(135deg, #f5f3ff 0%, #e0d7ff 100%);
            color: var(--text-color);
            margin: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            padding-bottom: 300px; 
        }

        .container {
            width: 100%;
            max-width: 600px;
            margin-top: 20px;
            padding: 0 15px;
        }

        h1 {
            text-align: center;
            color: var(--deep-purple);
            text-shadow: 1px 1px 2px white;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .section {
            background: var(--soft-white);
            border-radius: 15px;
            padding: 25px 25px; 
            margin-bottom: 30px; 
            box-shadow: 0 6px 15px rgba(0,0,0,0.05);
            position: relative;
            z-index: 1;
        }

        h2 {
            font-size: 1.1rem;
            border-left: 4px solid var(--deep-purple);
            padding-left: 10px;
            margin-top: 0;
            margin-bottom: 15px;
        }

        .input-group {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }

        input[type="text"], input[type="date"] {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            flex-grow: 1;
            font-family: inherit;
            min-width: 0;
        }

        button {
            cursor: pointer;
            transition: 0.2s;
            white-space: nowrap;
        }

        .add-btn {
            background: var(--deep-purple);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
        }
        
        .add-btn:hover { background: #8575ff; }

        .task-item, .count-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px dashed #ccc;
        }

        .completed { text-decoration: line-through; color: #888; }

        .delete-btn {
            background: #ff8b8b;
            color: white;
            border: none;
            border-radius: 3px;
            padding: 4px 10px;
            font-size: 0.8rem;
            margin-left: 5px;
        }

        .today-highlight {
            color: #d4a5ff;
            font-weight: bold;
            text-shadow: 0 0 5px white;
        }

        /* å¿ƒæƒ…æŒ‰éˆ•å€ */
        .mood-selector {
            margin-bottom: 20px;
            text-align: center;
        }
        .mood-group {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        .mood-btn {
            border: 1px solid var(--deep-purple);
            background: white;
            padding: 8px 5px;
            border-radius: 10px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        .mood-btn:hover { background: var(--star-purple); }

        /* æœˆæ›†æ¨£å¼ */
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-weight: bold;
            color: var(--deep-purple);
            font-size: 1.1rem;
            padding: 0 5px;
        }
        
        .calendar-grid-container {
            display: grid;
            grid-template-columns: repeat(7, 1fr); 
            gap: 6px; 
            text-align: center;
        }

        .grid-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 0.9rem;
            position: relative;
        }

        .grid-cell--header {
            font-size: 0.85rem;
            color: #888;
            font-weight: bold;
            padding-bottom: 8px;
            align-items: flex-end;
            height: auto;
        }

        .grid-cell--day {
            background: rgba(255,255,255,0.6);
            aspect-ratio: 1; 
            flex-direction: column; 
            border: 1px solid transparent;
            transition: all 0.2s;
        }

        .grid-cell--day.today {
            border: 2px solid var(--deep-purple);
            background: white;
            font-weight: bold;
            color: var(--deep-purple);
        }

        .mood-icon { font-size: 1.1rem; margin-top: 2px; }

        .random-box {
            background: #fff;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--star-purple);
            text-align: center;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
            line-height: 1.5;
        }

        /* æ²ˆæ˜Ÿå›å€åŸŸ */
        .character-zone {
            position: fixed;
            left: 15px;
            bottom: 20px;
            display: flex;
            align-items: flex-end;
            pointer-events: none;
            z-index: 9999;
        }

        .avatar {
            width: 110px;
            height: 110px;
            background-image: url('1234.jpg'); 
            background-size: cover;
            background-position: center;
            cursor: pointer;
            pointer-events: auto;
            border-radius: 50%;
            border: 4px solid white; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }
        
        .avatar:hover { transform: scale(1.05); }

        .bubble {
            background: white;
            border: 2px solid var(--deep-purple);
            padding: 10px 15px;
            border-radius: 15px;
            margin-bottom: 50px;
            margin-left: 10px;
            max-width: 200px;
            position: relative;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .bubble::after {
            content: '';
            position: absolute;
            left: -10px;
            bottom: 15px;
            border-width: 10px 10px 10px 0;
            border-style: solid;
            border-color: transparent white transparent transparent;
        }
        
        .bubble::before {
            content: '';
            position: absolute;
            left: -13px;
            bottom: 15px;
            border-width: 10px 10px 10px 0;
            border-style: solid;
            border-color: transparent var(--deep-purple) transparent transparent;
            z-index: -1;
        }

        /* æ‰‹æ©Ÿç‰ˆ RWD */
        @media (max-width: 480px) {
            .section { padding: 20px 12px; }
            .calendar-grid-container { gap: 3px; }
            .grid-cell { font-size: 0.8rem; border-radius: 5px; }
            .mood-icon { font-size: 0.9rem; }
            .avatar { width: 85px; height: 85px; border-width: 3px; }
            .mood-group { gap: 6px; }
            .mood-btn { font-size: 0.8rem; padding: 8px 2px; }
            .bubble { margin-bottom: 40px; max-width: 160px; font-size: 0.85rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>âœ¨ æ˜Ÿå…‰å‚™å¿˜éŒ„ âœ¨</h1>

    <div class="section">
        <h2>æ²ˆæ˜Ÿå›çš„å°ä»»å‹™</h2>
        <button class="add-btn" style="width: 100%;" onclick="getRandomTask()">ç²å–ä»Šæ—¥éš¨æ©Ÿæ˜Ÿå…‰ä»»å‹™</button>
        <div class="random-box" id="taskDisplay">é»æ“ŠæŒ‰éˆ•ï¼Œæ¥å–æˆ‘çš„å°ä»»å‹™å§ã€‚</div>
    </div>

    <div class="section">
        <h2>æ¯æ—¥ç›®æ¨™ (è‡ªå‹•é‡ç½®)</h2>
        <div class="input-group">
            <input type="text" id="repeatInput" placeholder="ä¾‹å¦‚ï¼šå–æ°´2000cc...">
            <button class="add-btn" onclick="addRepeatTask()">æ–°å¢</button>
        </div>
        <div id="repeatList"></div>
    </div>

    <div class="section">
        <h2>å°ç›®æ¨™</h2>
        <div class="input-group">
            <input type="text" id="oneTimeInput" placeholder="è¼¸å…¥å¾…å®Œæˆçš„ç›®æ¨™...">
            <button class="add-btn" onclick="addOneTimeTask()">æ–°å¢</button>
        </div>
        <div id="oneTimeList"></div>
    </div>

    <div class="section">
        <h2>é€±å¹´å€’æ•¸</h2>
        <div class="input-group">
            <input type="text" id="countName" placeholder="ç´€å¿µæ—¥åç¨±...">
            <input type="date" id="countDate">
            <button class="add-btn" onclick="addCountdown()">ç´€éŒ„</button>
        </div>
        <div id="countdownList"></div>
    </div>

    <div class="section">
        <h2>å¿ƒæƒ…è¨˜éŒ„</h2>
        <div class="mood-selector">
            <label style="font-size:0.95rem; color:#555; font-weight:bold;">ğŸ“… é¸æ“‡æ—¥æœŸï¼š</label>
            <input type="date" id="moodDate" style="padding: 5px 10px; margin-left:5px;">
        </div>
        <div class="mood-group">
            <button class="mood-btn" onclick="recordMood('é–‹å¿ƒ')">ğŸ˜Š é–‹å¿ƒ</button>
            <button class="mood-btn" onclick="recordMood('èˆˆå¥®')">ğŸ¤© èˆˆå¥®</button>
            <button class="mood-btn" onclick="recordMood('é›£é')">ğŸ˜¢ é›£é</button>
            <button class="mood-btn" onclick="recordMood('å¥½ç´¯')">ğŸ˜« å¥½ç´¯</button>
            <button class="mood-btn" onclick="recordMood('ç”Ÿæ°£')">ğŸ’¢ ç”Ÿæ°£</button>
            <button class="mood-btn" onclick="recordMood('å¹³éœ')">ğŸ˜Œ å¹³éœ</button>
        </div>
    </div>

    <div class="section">
        <h2>å¿ƒæƒ…æœˆæ›†</h2>
        <div class="calendar-header">
            <button class="add-btn" style="padding: 2px 12px; font-size: 1.1rem;" onclick="changeMonth(-1)">â®</button>
            <span id="calendarMonthYear" style="min-width: 100px; text-align: center;"></span>
            <button class="add-btn" style="padding: 2px 12px; font-size: 1.1rem;" onclick="changeMonth(1)">â¯</button>
        </div>
        
        <div class="calendar-grid-container" id="calendarBody"></div>
    </div>
</div>

<div class="character-zone">
    <div class="avatar" onclick="saySomething('touch')"></div>
    <div class="bubble" id="dialogue">...</div>
</div>

<script>
    // è³‡æ–™åˆå§‹åŒ–
    let repeatTasks = JSON.parse(localStorage.getItem('repeatTasks')) || [];
    let oneTimeTasks = JSON.parse(localStorage.getItem('oneTimeTasks')) || [];
    let countdowns = JSON.parse(localStorage.getItem('countdowns')) || [];
    let moodHistory = JSON.parse(localStorage.getItem('moodHistory')) || {}; 
    let lastVisitDate = localStorage.getItem('lastVisitDate');

    // æª¢æŸ¥æ˜¯å¦è·¨æ—¥ï¼Œå¦‚æœæ˜¯ï¼Œé‡ç½®ã€Œæ¯æ—¥ç›®æ¨™ã€çš„æ‰“å‹¾ç‹€æ…‹
    const todayStr = new Date().toDateString();
    if (lastVisitDate !== todayStr) {
        repeatTasks.forEach(task => task.completed = false); // é‡ç½®å®Œæˆç‹€æ…‹
        localStorage.setItem('repeatTasks', JSON.stringify(repeatTasks));
        localStorage.setItem('lastVisitDate', todayStr); // æ›´æ–°æœ€å¾Œè¨ªå•æ—¥æœŸ
    }

    // ç•¶å‰æœˆæ›†é¡¯ç¤ºçš„æ—¥æœŸ
    let currentCalendarDate = new Date();

    // é è¨­å¿ƒæƒ…æ—¥æœŸç‚ºä»Šå¤©
    document.getElementById('moodDate').valueAsDate = new Date();

    const moodIcons = {
        "é–‹å¿ƒ": "ğŸ˜Š", "èˆˆå¥®": "ğŸ¤©", "é›£é": "ğŸ˜¢",
        "å¥½ç´¯": "ğŸ˜«", "ç”Ÿæ°£": "ğŸ’¢", "å¹³éœ": "ğŸ˜Œ"
    };

    const dialogues = {
        touch: ["å—¯... å¦³åœ¨æ‰¾æˆ‘å—ï¼Ÿ", "åˆ¥æ“”å¿ƒï¼Œæˆ‘ä¸€ç›´éƒ½åœ¨å¦³èº«é‚Šã€‚", "å…‰èŠ’æœƒæŒ‡å¼•å¦³å‰é€²çš„æ–¹å‘ã€‚", "æƒ³å»å“ªè£¡ï¼Ÿæˆ‘é™ªå¦³ã€‚", "æ‰‹çµ¦æˆ‘ï¼Œåˆ¥èµ°ä¸Ÿäº†ã€‚"],
        add: ["æ–°çš„è¨ˆåŠƒå—ï¼Ÿæˆ‘æœƒé™ªå¦³ä¸€èµ·å®Œæˆçš„ã€‚", "è¨˜å¥½äº†ï¼Œé€™ä»¶äº‹å°å¦³å¾ˆé‡è¦å°å§ï¼Ÿ"],
        complete: ["å¦³åšå¾—å¾ˆå¥½ï¼Œè¾›è‹¦äº†ã€‚", "å¦³æœç„¶å¾ˆå‡ºè‰²ï¼Œè¦çµ¦å¦³ä¸€é»çå‹µå—ï¼Ÿ"],
        "é–‹å¿ƒ": ["çœ‹åˆ°å¦³é€™éº¼é–‹å¿ƒï¼Œå…‰èŠ’å¥½åƒéƒ½è®Šäº®äº†ã€‚", "åªè¦å¦³é«˜èˆˆï¼Œæˆ‘ä¹Ÿæœƒè¦ºå¾—å¿ƒæƒ…å¾ˆå¥½ã€‚"],
        "èˆˆå¥®": ["ç™¼ç”Ÿä»€éº¼å¥½äº‹äº†ï¼Ÿæ…¢æ…¢èªªï¼Œæˆ‘è½è‘—ã€‚", "å¦³çœ¼ç›è£¡æœ‰æ˜Ÿæ˜Ÿåœ¨é–ƒã€‚"],
        "é›£é": ["æƒ³å“­å°±å“­å§ï¼Œæˆ‘åœ¨ï¼Œä¸æœƒé›¢é–‹ã€‚", "æ²’äº‹çš„ï¼Œæˆ‘æœƒä¸€ç›´é™ªè‘—å¦³ï¼Œç›´åˆ°å¦³å¥½èµ·ä¾†ã€‚"],
        "å¥½ç´¯": ["è¾›è‹¦äº†ï¼Œå…ˆä¼‘æ¯ä¸€ä¸‹å§ï¼Œæˆ‘å®ˆè‘—å¦³ã€‚", "å°±æ˜¯é€™æ¨£ï¼ŒæŠŠé ­é åœ¨æˆ‘çš„è‚©è†€ä¸Šï¼Œç¡å§ã€‚"],
        "ç”Ÿæ°£": ["èª°æƒ¹å¦³ç”Ÿæ°£äº†ï¼Ÿè¦å»å¹«å¦³æ•™è¨“ä»–å—ï¼Ÿ", "æ·±å‘¼å¸ï¼Œæœ‰æˆ‘åœ¨é€™ï¼Œä¸æ°£äº†ã€‚"],
        "å¹³éœ": ["é€™æ¨£å®‰å®‰éœéœçš„æ™‚åˆ»ï¼Œæ„Ÿè¦ºå¾ˆèˆ’æœã€‚", "å¹³å‡¡çš„æ—¥å­ï¼Œåªè¦æœ‰å¦³åœ¨å°±å¾ˆç‰¹åˆ¥ã€‚"],
        "countdown": ["é€™ä¸€å¤©ä¸çŸ¥ä¸è¦ºå¿«åˆ°äº†å‘¢ã€‚", "å°å¦³ä¾†èªªæ˜¯å¾ˆé‡è¦çš„æ—¥å­å§ï¼Ÿæˆ‘æœƒè¨˜ä¸‹ä¾†çš„ã€‚", "é‚£ä¸€å¤©ï¼Œæˆ‘å€‘æœƒä¸€èµ·åº¦éå—ï¼Ÿ"]
    };

    const randomTasks = [
        "ä»Šå¤©å¤šå–ä¸€é»æ°´ï¼Œç…§é¡§å¥½èº«é«”ã€‚", "æŠ¬é ­çœ‹çœ‹å¤©ç©ºï¼Œæ‰¾ä¸€é¡†æœ€äº®çš„æ˜Ÿæ˜Ÿã€‚",
        "çµ¦è‡ªå·±äº”åˆ†é˜ï¼Œéœä¸‹å¿ƒä¾†ä»€éº¼éƒ½åˆ¥æƒ³ã€‚", "å°é¡å­è£¡çš„è‡ªå·±ç¬‘ä¸€å€‹ã€‚",
        "ä»Šå¤©æ—©ååˆ†é˜èººåˆ°åºŠä¸Šä¼‘æ¯ã€‚", "åƒä¸€é»ç”œçš„æ±è¥¿ï¼Œè®“å¿ƒæƒ…è®Šå¥½ã€‚",
        "è½ä¸€é¦–å¦³æœ€å–œæ­¡çš„æ­Œã€‚", "æ·±å‘¼å¸ä¸‰æ¬¡ï¼ŒæŠŠä¸æ„‰å¿«éƒ½åå‡ºä¾†ã€‚",
        "ä»Šå¤©è©¦è‘—å¤šç¨±è®šè‡ªå·±ä¸€é»ã€‚", "å¦‚æœç´¯äº†å°±é–‰ä¸Šçœ¼ï¼Œæˆ‘åœ¨å¦³èº«é‚Šã€‚"
    ];

    // --- æ ¸å¿ƒåŠŸèƒ½ ---

    function saySomething(type) {
        const bubble = document.getElementById('dialogue');
        const options = dialogues[type];
        const randomText = options[Math.floor(Math.random() * options.length)];
        bubble.innerText = randomText;
        bubble.style.opacity = 1;
        setTimeout(() => { bubble.style.opacity = 0; }, 4000);
    }

    // --- å¿ƒæƒ…èˆ‡æœˆæ›†åŠŸèƒ½ ---

    function recordMood(mood) {
        const dateInput = document.getElementById('moodDate').value;
        if (!dateInput) { alert("è«‹å…ˆé¸æ“‡æ—¥æœŸå–”ï¼"); return; }
        moodHistory[dateInput] = mood;
        localStorage.setItem('moodHistory', JSON.stringify(moodHistory));
        saySomething(mood);
        renderCalendar();
    }

    function changeMonth(delta) {
        currentCalendarDate.setMonth(currentCalendarDate.getMonth() + delta);
        renderCalendar();
    }

    function renderCalendar() {
        const year = currentCalendarDate.getFullYear();
        const month = currentCalendarDate.getMonth();
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        
        document.getElementById('calendarMonthYear').innerText = `${year}å¹´ ${month + 1}æœˆ`;
        const calendarBody = document.getElementById('calendarBody');
        calendarBody.innerHTML = '';

        const weekDays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
        weekDays.forEach(day => { calendarBody.innerHTML += `<div class="grid-cell grid-cell--header">${day}</div>`; });
        for (let i = 0; i < firstDay; i++) { calendarBody.innerHTML += `<div class="grid-cell grid-cell--day empty"></div>`; }

        for (let day = 1; day <= daysInMonth; day++) {
            const monthStr = String(month + 1).padStart(2, '0');
            const dayStr = String(day).padStart(2, '0');
            const dateKey = `${year}-${monthStr}-${dayStr}`;
            const mood = moodHistory[dateKey];
            const icon = mood ? moodIcons[mood] : '';
            const today = new Date();
            const isToday = (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) ? 'today' : '';

            calendarBody.innerHTML += `
                <div class="grid-cell grid-cell--day ${isToday}">
                    <span>${day}</span>
                    <span class="mood-icon">${icon}</span>
                </div>
            `;
        }
    }

    // --- å…¶ä»–åŠŸèƒ½ (ä»»å‹™ & å€’æ•¸) ---

    function getRandomTask() {
        const task = randomTasks[Math.floor(Math.random() * randomTasks.length)];
        document.getElementById('taskDisplay').innerText = task;
        saySomething('add');
    }

    function addCountdown() {
        const name = document.getElementById('countName');
        const dateInput = document.getElementById('countDate');
        if (!name.value || !dateInput.value) return;
        const dateObj = new Date(dateInput.value);
        countdowns.push({ name: name.value, month: dateObj.getMonth() + 1, day: dateObj.getDate() });
        name.value = ''; dateInput.value = '';
        saySomething('countdown');
        saveAndRender();
    }

    // æ–°å¢æ¯æ—¥ç›®æ¨™ (é‡è¤‡)
    function addRepeatTask() {
        const input = document.getElementById('repeatInput');
        if (!input.value) return;
        repeatTasks.push({ text: input.value, completed: false });
        input.value = '';
        saySomething('add');
        saveAndRender();
    }

    // æ–°å¢å°ç›®æ¨™ (ä¸€æ¬¡æ€§)
    function addOneTimeTask() {
        const input = document.getElementById('oneTimeInput');
        if (!input.value) return;
        oneTimeTasks.push({ text: input.value, completed: false });
        input.value = '';
        saySomething('add');
        saveAndRender();
    }

    // åˆ‡æ›ç‹€æ…‹é€šç”¨å‡½æ•¸
    function toggleTask(type, index) {
        if (type === 'repeat') {
            repeatTasks[index].completed = !repeatTasks[index].completed;
            if (repeatTasks[index].completed) saySomething('complete');
        } else if (type === 'oneTime') {
            oneTimeTasks[index].completed = !oneTimeTasks[index].completed;
            if (oneTimeTasks[index].completed) saySomething('complete');
        }
        saveAndRender();
    }

    function deleteTask(type, index) {
        if (type === 'repeat') repeatTasks.splice(index, 1);
        else if (type === 'oneTime') oneTimeTasks.splice(index, 1);
        else if (type === 'count') countdowns.splice(index, 1);
        saveAndRender();
    }

    function saveAndRender() {
        localStorage.setItem('repeatTasks', JSON.stringify(repeatTasks));
        localStorage.setItem('oneTimeTasks', JSON.stringify(oneTimeTasks));
        localStorage.setItem('countdowns', JSON.stringify(countdowns));
        renderList();
    }

    function renderList() {
        // æ¸²æŸ“æ¯æ—¥ç›®æ¨™
        document.getElementById('repeatList').innerHTML = repeatTasks.map((t, i) => `
            <div class="task-item">
                <label class="${t.completed ? 'completed' : ''}" style="cursor:pointer; flex-grow:1;">
                    <input type="checkbox" ${t.completed ? 'checked' : ''} onchange="toggleTask('repeat', ${i})">
                    ${t.text}
                </label>
                <button class="delete-btn" onclick="deleteTask('repeat', ${i})">åˆªé™¤</button>
            </div>
        `).join('');

        // æ¸²æŸ“å°ç›®æ¨™
        document.getElementById('oneTimeList').innerHTML = oneTimeTasks.map((t, i) => `
            <div class="task-item">
                <label class="${t.completed ? 'completed' : ''}" style="cursor:pointer; flex-grow:1;">
                    <input type="checkbox" ${t.completed ? 'checked' : ''} onchange="toggleTask('oneTime', ${i})">
                    ${t.text}
                </label>
                <button class="delete-btn" onclick="deleteTask('oneTime', ${i})">åˆªé™¤</button>
            </div>
        `).join('');

        // æ¸²æŸ“å€’æ•¸
        const now = new Date();
        const currentYear = now.getFullYear();
        document.getElementById('countdownList').innerHTML = countdowns.map((c, i) => {
            let target = new Date(currentYear, c.month - 1, c.day);
            if (target.setHours(0,0,0,0) < now.setHours(0,0,0,0)) {
                target = new Date(currentYear + 1, c.month - 1, c.day);
            }
            const diffTime = target.setHours(0,0,0,0) - now.setHours(0,0,0,0);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            let displayText = diffDays === 0 
                ? `<span class="today-highlight">âœ¨ å°±æ˜¯ä»Šå¤© âœ¨</span>` 
                : `é‚„æœ‰ ${diffDays} å¤©`;

            return `
                <div class="count-item">
                    <span><strong>${c.name}</strong> (${c.month}/${c.day})ï¼š${displayText}</span>
                    <button class="delete-btn" onclick="deleteTask('count', ${i})">åˆªé™¤</button>
                </div>
            `;
        }).join('');
    }

    // åˆå§‹åŒ–åŸ·è¡Œ
    renderList();
    renderCalendar();
</script>

</body>
</html>
